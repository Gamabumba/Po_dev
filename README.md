# =============================================
#  Rss –ø–∞—Ä—Å–µ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π
# =============================================
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ RSS-–ª–µ–Ω—Ç–∞—Ö. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

# ---------------------------------------------
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
# ---------------------------------------------
# .
# ‚îú‚îÄ‚îÄ Results and logs     # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –≤ pdf –∏ –ª–æ–≥–∏ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
# ‚îú‚îÄ‚îÄ app.py               # –í–µ–±-—Å–µ—Ä–≤–∏—Å –Ω–∞ Flask
# ‚îú‚îÄ‚îÄ rss_parser.py        # –ü–∞—Ä—Å–µ—Ä RSS-–ª–µ–Ω—Ç
# ‚îú‚îÄ‚îÄ init_db.py           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î SQLite
# ‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
# ‚îî‚îÄ‚îÄ templates
#     ‚îî‚îÄ‚îÄ index.html       # –®–∞–±–ª–æ–Ω –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π

# ---------------------------------------------
# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
# ---------------------------------------------
# feedparser==6.0.10
# Flask==3.0.2

# ---------------------------------------------
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ 
# ---------------------------------------------
git clone https://github.com/–≤–∞—à_–ª–æ–≥–∏–Ω/rss-monitor.git
cd rss-monitor

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫
pip install -r requirements.txt

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
python init_db.py

# ---------------------------------------------
# –ó–∞–ø—É—Å–∫
# ---------------------------------------------
# –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞ (–≤ —Ñ–æ–Ω–µ):
python app.py &           # http://localhost:5000

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞:
python rss_parser.py

# ---------------------------------------------
# –ü—Ä–∏–º–µ—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è RSS-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
# ---------------------------------------------
# –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏:
curl -X POST -F "url=http://feeds.bbci.co.uk/news/world/rss.xml" http://localhost:5000/add_source
curl -X POST -F "url=https://rss.nytimes.com/services/xml/rss/nyt/World.xml" http://localhost:5000/add_source

# ---------------------------------------------
# üîë –ü—Ä–∏–º–µ—Ä—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
# ---------------------------------------------
curl -X POST -F "keyword=fire" http://localhost:5000/add_keyword
curl -X POST -F "keyword=cyber" http://localhost:5000/add_keyword
curl -X POST -F "keyword=Ukraine" http://localhost:5000/add_keyword
curl -X POST -F "keyword=crime" http://localhost:5000/add_keyword

# ---------------------------------------------
# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞
# ---------------------------------------------
crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
*/30 * * * * /–ø–æ–ª–Ω—ã–π/–ø—É—Ç—å/–∫/python /–ø–æ–ª–Ω—ã–π/–ø—É—Ç—å/–∫/rss_parser.py >> parser.log 2>&1

# ---------------------------------------------
# –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
# ---------------------------------------------
# –î–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:5000

# API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
# GET /          - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
# GET /news      - –ù–æ–≤–æ—Å—Ç–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
# POST /add_source - –î–æ–±–∞–≤–∏—Ç—å RSS-–∏—Å—Ç–æ—á–Ω–∏–∫
# POST /add_keyword - –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ

# ---------------------------------------------
# –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
# ---------------------------------------------
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø–∞—Ä—Å–µ—Ä–∞:
tail -f parser.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
curl http://localhost:5000/sources

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤:
curl http://localhost:5000/keywords

# ---------------------------------------------
# üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è: MIT
# ---------------------------------------------
